<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoatMap | Market Analysis</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div id="app-layout">
        <div id="toolbar">
            <div class="control-group">
                <label>Tools</label>
                <div class="row" style="margin-top:5px;">
                    <input type="text" id="search-input" placeholder="Search Ticker..." style="width:100px;">
                    <button id="btn-watchlist">Portfolio</button>
                </div>
            </div>
            <div class="control-group">
                <label>Layout</label>
                <div class="row" style="margin-top:5px;">
                    <button id="view-net" class="active">Network</button>
                    <button id="view-heat">Heatmap</button>
                </div>
            </div>
            <div class="control-group">
                <label>Min Score: <span id="score-val" style="color:var(--accent)">0</span></label>
                <div class="row" style="margin-top:5px;">
                    <input type="range" id="score-filter" min="0" max="100" value="0" style="width:100px;">
                </div>
            </div>
        </div>

        <div id="watchlist"><div id="wl-list"></div></div>

        <div id="graph-container">
            <svg id="main-svg" width="100%" height="100%"></svg>
        </div>

        <div id="sidebar">
            <div class="tabs">
                <div class="tab active" data-target="tab-overview">OVERVIEW</div>
                <div class="tab" data-target="tab-charts">FINANCIALS</div>
            </div>
            
            <button id="close-sidebar" style="position:absolute; top:10px; right:10px; border:none; background:none; color:var(--dim); z-index:30; cursor:pointer; font-size:16px;">âœ•</button>

            <div id="tab-overview" class="sidebar-content active">
                <div class="detail-header">
                    <h1 id="det-ticker" style="margin:0; font-size:32px;">--</h1>
                    <div class="score-badge" id="d-score">--</div>
                </div>
                <div id="det-name" style="color:var(--dim); margin-bottom:20px;">--</div>
                
                <div id="radar-chart"></div>
                
                <h3 style="margin-top:20px; font-size:12px; color:var(--dim); border-bottom:1px solid var(--border); padding-bottom:5px;">KEY METRICS</h3>
                <div id="metrics-grid" class="metrics-grid"></div>
            </div>

            <div id="tab-charts" class="sidebar-content">
                <div style="font-size:12px; font-weight:700; color:var(--dim); margin-bottom:10px;">GROWTH (Revenue vs Income)</div>
                <div id="chart-growth" class="chart-container"></div>
                
                <div style="font-size:12px; font-weight:700; color:var(--dim); margin-bottom:10px; margin-top:30px;">CASH FLOW (FCF History)</div>
                <div id="chart-fcf" class="chart-container"></div>
            </div>
        </div>
    </div>
    
    <div id="loading-overlay" style="position:fixed; top:0; left:0; width:100%; height:100%; background:var(--bg); z-index:999; display:flex; justify-content:center; align-items:center; color:var(--dim);">
        Initializing MoatMap...
    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>
